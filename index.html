<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Josiah Shipment - Import & Export Services</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --earth-brown: #8B4513;
            --chocolate: #D2691E;
            --burlywood: #DEB887;
            --forest-green: #228B22;
            --firebrick: #B22222;
            --light-cream: #FFF8DC;
            --dark-text: #333;
            --light-gray: #f5f5f5;
            --border-color: #ddd;
            --sidebar-width: 250px;
            --error-red: #dc3545;
            --success-green: #28a745;
        }

        body {
            color: var(--dark-text);
            line-height: 1.6;
            background-color: #f9f9f9;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(to right, var(--earth-brown), var(--chocolate));
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .logo i {
            margin-right: 10px;
            color: var(--burlywood);
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 20px;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            transition: color 0.3s;
            font-weight: 500;
        }

        nav ul li a:hover {
            color: var(--burlywood);
        }

        /* Login Dropdown */
        .login-dropdown {
            position: relative;
        }

        .login-dropdown-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            font-weight: 500;
        }

        .login-dropdown-btn i {
            margin-left: 5px;
        }

        .login-dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: white;
            min-width: 160px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 5px;
            overflow: hidden;
        }

        .login-dropdown-content a {
            color: var(--dark-text);
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.3s;
        }

        .login-dropdown-content a:hover {
            background-color: var(--light-gray);
        }

        .login-dropdown:hover .login-dropdown-content {
            display: block;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Main Content Area */
        .main-content {
            min-height: calc(100vh - 80px);
            display: none;
        }

        .main-content.active {
            display: block;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://picsum.photos/seed/shipping-containers/1600/800.jpg');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 100px 0;
            text-align: center;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--burlywood);
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 30px;
        }

        .cta-button {
            display: inline-block;
            background: var(--forest-green);
            color: white;
            padding: 15px 30px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }

        .cta-button:hover {
            background: #1a6b1a;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .cta-button:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        .cta-button.secondary {
            background: var(--firebrick);
            margin-left: 10px;
        }

        .cta-button.secondary:hover {
            background: #8b1a1a;
        }

        .cta-button.loading {
            color: transparent;
        }

        .cta-button.loading::after {
            content: "";
            position: absolute;
            width: 16px;
            height: 16px;
            top: 50%;
            left: 50%;
            margin-left: -8px;
            margin-top: -8px;
            border: 2px solid #ffffff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spinner 0.8s linear infinite;
        }

        @keyframes spinner {
            to { transform: rotate(360deg); }
        }

        /* Section Styles */
        .section {
            padding: 80px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
            font-size: 2.5rem;
            color: var(--earth-brown);
        }

        /* Services Grid */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .service-card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            text-align: center;
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .service-card i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--forest-green);
        }

        .service-card h3 {
            margin-bottom: 15px;
            color: var(--earth-brown);
        }

        /* Routes Section */
        .routes {
            background-color: white;
        }

        .routes-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
        }

        .route-card {
            background: linear-gradient(to bottom, var(--burlywood), var(--chocolate));
            color: white;
            border-radius: 10px;
            padding: 30px;
            width: 250px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .route-card:hover {
            transform: scale(1.05);
        }

        .route-card i {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        /* Products Section */
        .products {
            background-color: var(--light-cream);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .product-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .product-item:hover {
            background: var(--forest-green);
            color: white;
            transform: translateY(-5px);
        }

        .product-item i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--firebrick);
        }

        .product-item:hover i {
            color: white;
        }

        /* Quote Section */
        .quote-section {
            background: linear-gradient(to right, var(--earth-brown), var(--chocolate));
            color: white;
        }

        .quote-form {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            padding: 40px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            transition: box-shadow 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(34, 139, 34, 0.3);
        }

        .form-group input.error,
        .form-group select.error,
        .form-group textarea.error {
            border: 2px solid var(--error-red);
        }

        .form-group textarea {
            height: 120px;
            resize: vertical;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .error-message {
            color: var(--error-red);
            font-size: 0.875rem;
            margin-top: 5px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .password-strength {
            margin-top: 5px;
            height: 5px;
            border-radius: 3px;
            background-color: #e9ecef;
            overflow: hidden;
        }

        .password-strength-bar {
            height: 100%;
            width: 0;
            transition: width 0.3s, background-color 0.3s;
        }

        .password-strength-bar.weak {
            width: 33%;
            background-color: var(--error-red);
        }

        .password-strength-bar.medium {
            width: 66%;
            background-color: #ffc107;
        }

        .password-strength-bar.strong {
            width: 100%;
            background-color: var(--success-green);
        }

        /* Admin Dashboard with Sidebar */
        .admin-dashboard {
            display: none;
            min-height: calc(100vh - 80px);
        }

        .admin-dashboard.active {
            display: flex;
        }

        .admin-sidebar {
            width: var(--sidebar-width);
            background: var(--dark-text);
            color: white;
            padding: 20px 0;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            position: fixed;
            height: calc(100vh - 80px);
            overflow-y: auto;
            z-index: 100;
        }

        .admin-sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid #444;
            margin-bottom: 20px;
        }

        .admin-sidebar-header h3 {
            color: var(--burlywood);
            font-size: 1.2rem;
        }

        .admin-sidebar-menu {
            list-style: none;
        }

        .admin-sidebar-menu li {
            margin-bottom: 5px;
        }

        .admin-sidebar-menu a {
            display: block;
            padding: 12px 20px;
            color: white;
            text-decoration: none;
            transition: background-color 0.3s;
        }

        .admin-sidebar-menu a:hover,
        .admin-sidebar-menu a.active {
            background-color: var(--forest-green);
        }

        .admin-sidebar-menu a i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .admin-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 30px;
            background-color: var(--light-gray);
        }

        .admin-header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-header h2 {
            color: var(--earth-brown);
        }

        .admin-content-inner {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--forest-green), #1a6b1a);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .stat-card p {
            opacity: 0.9;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .data-table th {
            background-color: var(--light-gray);
            font-weight: 600;
            color: var(--earth-brown);
        }

        .data-table tr:hover {
            background-color: var(--light-cream);
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-confirmed {
            background-color: #d4edda;
            color: #155724;
        }

        .status-shipped {
            background-color: #cce5ff;
            color: #004085;
        }

        .status-delivered {
            background-color: #d1ecf1;
            color: #0c5460;
        }

        /* Customer Portal with Sidebar */
        .customer-portal {
            display: none;
            min-height: calc(100vh - 80px);
        }

        .customer-portal.active {
            display: flex;
        }

        .customer-sidebar {
            width: var(--sidebar-width);
            background: var(--dark-text);
            color: white;
            padding: 20px 0;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            position: fixed;
            height: calc(100vh - 80px);
            overflow-y: auto;
            z-index: 100;
        }

        .customer-sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid #444;
            margin-bottom: 20px;
        }

        .customer-sidebar-header h3 {
            color: var(--burlywood);
            font-size: 1.2rem;
        }

        .customer-sidebar-menu {
            list-style: none;
        }

        .customer-sidebar-menu li {
            margin-bottom: 5px;
        }

        .customer-sidebar-menu a {
            display: block;
            padding: 12px 20px;
            color: white;
            text-decoration: none;
            transition: background-color 0.3s;
        }

        .customer-sidebar-menu a:hover,
        .customer-sidebar-menu a.active {
            background-color: var(--forest-green);
        }

        .customer-sidebar-menu a i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .customer-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 30px;
            background-color: var(--light-gray);
        }

        .customer-header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .customer-header h2 {
            color: var(--earth-brown);
        }

        .customer-content-inner {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .shipment-card {
            background: var(--light-cream);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--forest-green);
        }

        .shipment-card h4 {
            color: var(--earth-brown);
            margin-bottom: 10px;
        }

        .shipment-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .shipment-details div {
            display: flex;
            flex-direction: column;
        }

        .shipment-details span {
            font-size: 0.9rem;
            color: #666;
        }

        .shipment-details strong {
            color: var(--dark-text);
            margin-top: 5px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--burlywood);
        }

        /* Form Elements */
        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-cancel {
            background: #6c757d;
        }

        .btn-cancel:hover {
            background: #5a6268;
        }

        /* Footer */
        footer {
            background: var(--dark-text);
            color: white;
            padding: 50px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-section h3 {
            margin-bottom: 20px;
            color: var(--burlywood);
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 10px;
        }

        .footer-section ul li a {
            color: white;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section ul li a:hover {
            color: var(--burlywood);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #555;
            font-size: 0.9rem;
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-icons a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: var(--forest-green);
            color: white;
            border-radius: 50%;
            transition: background 0.3s;
        }

        .social-icons a:hover {
            background: var(--firebrick);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close-modal {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #aaa;
        }

        .close-modal:hover {
            color: var(--firebrick);
        }

        .tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border-color);
        }

        .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            border-bottom-color: var(--forest-green);
            color: var(--forest-green);
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--forest-green);
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transform: translateX(150%);
            transition: transform 0.3s;
            z-index: 3000;
            max-width: 350px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--error-red);
        }

        .notification.success {
            background: var(--success-green);
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
            }

            .logo {
                margin-bottom: 15px;
            }

            nav ul {
                flex-direction: column;
                text-align: center;
            }

            nav ul li {
                margin: 10px 0;
            }

            .mobile-menu-btn {
                display: block;
                position: absolute;
                top: 15px;
                right: 20px;
            }

            nav {
                display: none;
                width: 100%;
            }

            nav.active {
                display: block;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .cta-button.secondary {
                margin-left: 0;
                margin-top: 10px;
            }

            .admin-sidebar,
            .customer-sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .admin-sidebar.active,
            .customer-sidebar.active {
                transform: translateX(0);
            }

            .admin-content,
            .customer-content {
                margin-left: 0;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                padding: 20px;
                margin: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-shipping-fast"></i>
                    <span>Josiah Shipment</span>
                </div>
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <nav id="mainNav">
                    <ul>
                        <li><a href="#" onclick="showSection('home')">Home</a></li>
                        <li><a href="#" onclick="showSection('services')">Services</a></li>
                        <li><a href="#" onclick="showSection('routes')">Routes</a></li>
                        <li><a href="#" onclick="showSection('products')">Products</a></li>
                        <li><a href="#" onclick="showSection('quote')">Get Quote</a></li>
                        <li class="login-dropdown">
                            <button class="login-dropdown-btn">
                                Login as: <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="login-dropdown-content">
                                <a href="#" onclick="showLoginModal('customer')">Customer</a>
                                <a href="#" onclick="showLoginModal('admin')">Admin</a>
                            </div>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Website Content -->
    <div id="homeSection" class="main-content active">
        <!-- Hero Section -->
        <section class="hero" id="home">
            <div class="container">
                <h1>Your Gateway to Global Trade</h1>
                <p>Reliable import and export services between Kenya and China, USA, UK, and more. Specializing in machinery, musical instruments, electronics, and other valuable cargo.</p>
                <div>
                    <a href="#" onclick="showSection('quote')" class="cta-button">Get a Quote</a>
                    <a href="#" onclick="showSection('services')" class="cta-button secondary">Our Services</a>
                </div>
            </div>
        </section>

        <!-- Services Section -->
        <section class="section services" id="services">
            <div class="container">
                <h2 class="section-title">Our Services</h2>
                <div class="services-grid">
                    <div class="service-card">
                        <i class="fas fa-plane"></i>
                        <h3>Air Freight</h3>
                        <p>Fast and reliable air shipping for time-sensitive cargo from China, USA, UK to Kenya.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-ship"></i>
                        <h3>Sea Freight</h3>
                        <p>Cost-effective ocean freight solutions for larger shipments with flexible transit times.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-truck"></i>
                        <h3>Land Transport</h3>
                        <p>Efficient ground transportation for last-mile delivery across Kenya and East Africa.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-file-contract"></i>
                        <h3>Customs Clearance</h3>
                        <p>Expert handling of all customs documentation and procedures for smooth clearance.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-warehouse"></i>
                        <h3>Warehousing</h3>
                        <p>Secure storage solutions for your cargo before final delivery to its destination.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-boxes"></i>
                        <h3>Packaging</h3>
                        <p>Professional packaging services to ensure your items arrive safely at their destination.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Routes Section -->
        <section class="section routes" id="routes">
            <div class="container">
                <h2 class="section-title">Our Routes</h2>
                <div class="routes-container">
                    <div class="route-card">
                        <i class="fas fa-globe-asia"></i>
                        <h3>China to Kenya</h3>
                        <p>Regular shipments from major Chinese cities to Nairobi, Mombasa, and beyond.</p>
                    </div>
                    <div class="route-card">
                        <i class="fas fa-flag-usa"></i>
                        <h3>USA to Kenya</h3>
                        <p>Direct and transshipment services from all major US ports and airports.</p>
                    </div>
                    <div class="route-card">
                        <i class="fas fa-crown"></i>
                        <h3>UK to Kenya</h3>
                        <p>Efficient shipping solutions from the United Kingdom to Kenya.</p>
                    </div>
                    <div class="route-card">
                        <i class="fas fa-globe-europe"></i>
                        <h3>Europe to Kenya</h3>
                        <p>Comprehensive coverage of major European trade routes to Kenya.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Products Section -->
        <section class="section products" id="products">
            <div class="container">
                <h2 class="section-title">Products We Ship</h2>
                <div class="products-grid">
                    <div class="product-item">
                        <i class="fas fa-industry"></i>
                        <h3>Machinery</h3>
                        <p>Industrial equipment and machinery</p>
                    </div>
                    <div class="product-item">
                        <i class="fas fa-music"></i>
                        <h3>Musical Instruments</h3>
                        <p>Pianos, guitars, drums and more</p>
                    </div>
                    <div class="product-item">
                        <i class="fas fa-laptop"></i>
                        <h3>Electronics</h3>
                        <p>Computers, phones, and gadgets</p>
                    </div>
                    <div class="product-item">
                        <i class="fas fa-car"></i>
                        <h3>Vehicles</h3>
                        <p>Cars, motorcycles, and parts</p>
                    </div>
                    <div class="product-item">
                        <i class="fas fa-tshirt"></i>
                        <h3>Textiles</h3>
                        <p>Clothing and fabric materials</p>
                    </div>
                    <div class="product-item">
                        <i class="fas fa-couch"></i>
                        <h3>Furniture</h3>
                        <p>Home and office furniture</p>
                    </div>
                    <div class="product-item">
                        <i class="fas fa-box"></i>
                        <h3>General Cargo</h3>
                        <p>Various goods and products</p>
                    </div>
                    <div class="product-item">
                        <i class="fas fa-file-alt"></i>
                        <h3>Documents</h3>
                        <p>Important papers and files</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quote Section -->
        <section class="section quote-section" id="quote">
            <div class="container">
                <h2 class="section-title" style="color: white;">Request a Quote</h2>
                <form class="quote-form" id="quoteForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="name">Your Name</label>
                            <input type="text" id="name" name="name" required>
                            <span class="error-message" id="nameError">Please enter your name</span>
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" required>
                            <span class="error-message" id="emailError">Please enter a valid email address</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone" required>
                            <span class="error-message" id="phoneError">Please enter your phone number</span>
                        </div>
                        <div class="form-group">
                            <label for="origin">Origin Country</label>
                            <select id="origin" name="origin" required>
                                <option value="">Select Origin</option>
                                <option value="china">China</option>
                                <option value="usa">USA</option>
                                <option value="uk">UK</option>
                                <option value="other">Other</option>
                            </select>
                            <span class="error-message" id="originError">Please select an origin country</span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="destination">Destination in Kenya</label>
                            <input type="text" id="destination" name="destination" placeholder="e.g., Nairobi, Mombasa" required>
                            <span class="error-message" id="destinationError">Please enter destination</span>
                        </div>
                        <div class="form-group">
                            <label for="product-type">Product Type</label>
                            <select id="product-type" name="product-type" required>
                                <option value="">Select Product Type</option>
                                <option value="machinery">Machinery</option>
                                <option value="musical-instruments">Musical Instruments</option>
                                <option value="electronics">Electronics</option>
                                <option value="vehicles">Vehicles</option>
                                <option value="textiles">Textiles</option>
                                <option value="furniture">Furniture</option>
                                <option value="other">Other</option>
                            </select>
                            <span class="error-message" id="productTypeError">Please select a product type</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="description">Description of Goods</label>
                        <textarea id="description" name="description" placeholder="Please describe your shipment in detail..." required></textarea>
                        <span class="error-message" id="descriptionError">Please provide a description</span>
                    </div>
                    <button type="submit" class="cta-button" id="quoteSubmitBtn">Submit Request</button>
                </form>
            </div>
        </section>

        <!-- Footer -->
        <footer id="contact">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <h3>About Josiah Shipment</h3>
                        <p>Your trusted partner for international shipping between Kenya and the world. We specialize in machinery, musical instruments, electronics, and more.</p>
                        <div class="social-icons">
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-twitter"></i></a>
                            <a href="#"><i class="fab fa-linkedin-in"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                    <div class="footer-section">
                        <h3>Quick Links</h3>
                        <ul>
                            <li><a href="#" onclick="showSection('services')">Our Services</a></li>
                            <li><a href="#" onclick="showSection('routes')">Shipping Routes</a></li>
                            <li><a href="#" onclick="showSection('products')">Products We Ship</a></li>
                            <li><a href="#" onclick="showSection('quote')">Get a Quote</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h3>Contact Information</h3>
                        <ul>
                            <li><i class="fas fa-map-marker-alt"></i> Nairobi, Kenya</li>
                            <li><i class="fas fa-phone"></i> +254 700 000 000</li>
                            <li><i class="fas fa-envelope"></i> info@josiahshipment.com</li>
                            <li><i class="fas fa-clock"></i> Mon-Fri: 8:00 AM - 6:00 PM</li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h3>Newsletter</h3>
                        <p>Subscribe to get updates on shipping rates and new routes.</p>
                        <form id="newsletterForm">
                            <div class="form-group">
                                <input type="email" placeholder="Your email address" required>
                            </div>
                            <button type="submit" class="cta-button">Subscribe</button>
                        </form>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; <span id="currentYear"></span> Josiah Shipment. All rights reserved. | Designed by Josiah</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="admin-dashboard">
        <div class="admin-sidebar" id="adminSidebar">
            <div class="admin-sidebar-header">
                <h3>Admin Panel</h3>
                <p id="adminName">Admin User</p>
            </div>
            <ul class="admin-sidebar-menu">
                <li><a href="#" class="active" onclick="showAdminSection('overview')"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="#" onclick="showAdminSection('quotes')"><i class="fas fa-file-invoice"></i> Quote Requests</a></li>
                <li><a href="#" onclick="showAdminSection('shipments')"><i class="fas fa-shipping-fast"></i> Shipments</a></li>
                <li><a href="#" onclick="showAdminSection('customers')"><i class="fas fa-users"></i> Customers</a></li>
                <li><a href="#" onclick="showAdminSection('reports')"><i class="fas fa-chart-bar"></i> Reports</a></li>
                <li><a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
        </div>

        <div class="admin-content">
            <div class="admin-header">
                <h2 id="adminSectionTitle">Dashboard</h2>
                <button id="mobileSidebarToggle" class="cta-button" style="display:none;">
                    <i class="fas fa-bars"></i> Menu
                </button>
            </div>

            <div class="admin-content-inner">
                <!-- Overview Section -->
                <div id="adminOverview" class="admin-section active">
                    <h3>Business Overview</h3>
                    <div class="stats-grid" id="adminStats">
                        <!-- Stats will be populated dynamically -->
                    </div>

                    <h4 style="margin-top: 30px; margin-bottom: 20px;">Recent Activities</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Activity</th>
                                <th>Customer</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="recentActivities">
                            <!-- Activities will be populated dynamically -->
                        </tbody>
                    </table>
                </div>

                <!-- Quotes Section -->
                <div id="adminQuotes" class="admin-section" style="display: none;">
                    <h3>Quote Requests</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Quote ID</th>
                                <th>Customer</th>
                                <th>Origin</th>
                                <th>Destination</th>
                                <th>Product Type</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="quotesTable">
                            <!-- Quotes will be populated dynamically -->
                        </tbody>
                    </table>
                </div>

                <!-- Shipments Section -->
                <div id="adminShipments" class="admin-section" style="display: none;">
                    <h3>Active Shipments</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Tracking ID</th>
                                <th>Customer</th>
                                <th>Route</th>
                                <th>Departure</th>
                                <th>Arrival</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="shipmentsTable">
                            <!-- Shipments will be populated dynamically -->
                        </tbody>
                    </table>
                </div>

                <!-- Customers Section -->
                <div id="adminCustomers" class="admin-section" style="display: none;">
                    <h3>Customer Management</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Customer ID</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Total Shipments</th>
                                <th>Registration Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="customersTable">
                            <!-- Customers will be populated dynamically -->
                        </tbody>
                    </table>
                </div>

                <!-- Reports Section -->
                <div id="adminReports" class="admin-section" style="display: none;">
                    <h3>Reports & Analytics</h3>
                    <div class="stats-grid" id="reportsStats">
                        <!-- Stats will be populated dynamically -->
                    </div>
                    <p style="margin-top: 30px;">Detailed reports can be generated and exported in PDF or Excel format.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Customer Portal -->
    <div id="customerPortal" class="customer-portal">
        <div class="customer-sidebar" id="customerSidebar">
            <div class="customer-sidebar-header">
                <h3>Customer Portal</h3>
                <p id="customerName">Customer Name</p>
            </div>
            <ul class="customer-sidebar-menu">
                <li><a href="#" class="active" onclick="showCustomerSection('dashboard')"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="#" onclick="showCustomerSection('shipments')"><i class="fas fa-shipping-fast"></i> My Shipments</a></li>
                <li><a href="#" onclick="showCustomerSection('quotes')"><i class="fas fa-file-invoice"></i> Quote Requests</a></li>
                <li><a href="#" onclick="showCustomerSection('profile')"><i class="fas fa-user"></i> My Profile</a></li>
                <li><a href="#" onclick="showCustomerSection('documents')"><i class="fas fa-file-alt"></i> Documents</a></li>
                <li><a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
        </div>

        <div class="customer-content">
            <div class="customer-header">
                <h2 id="customerSectionTitle">Dashboard</h2>
                <button id="mobileCustomerSidebarToggle" class="cta-button" style="display:none;">
                    <i class="fas fa-bars"></i> Menu
                </button>
            </div>

            <div class="customer-content-inner">
                <!-- Dashboard Section -->
                <div id="customerDashboard" class="customer-section active">
                    <h3>My Dashboard</h3>
                    <div class="stats-grid" id="customerStats">
                        <!-- Stats will be populated dynamically -->
                    </div>

                    <h4 style="margin-top: 30px; margin-bottom: 20px;">Recent Shipments</h4>
                    <div id="customerRecentShipments">
                        <!-- Shipments will be populated dynamically -->
                    </div>
                </div>

                <!-- Shipments Section -->
                <div id="customerShipments" class="customer-section" style="display: none;">
                    <h3>My Shipments</h3>
                    <div id="customerAllShipments">
                        <!-- Shipments will be populated dynamically -->
                    </div>
                </div>

                <!-- Quotes Section -->
                <div id="customerQuotes" class="customer-section" style="display: none;">
                    <h3>My Quote Requests</h3>
                    <div id="customerAllQuotes">
                        <!-- Quotes will be populated dynamically -->
                    </div>
                    <button class="cta-button" style="margin-top: 20px;" onclick="showSection('quote')">Request New Quote</button>
                </div>

                <!-- Profile Section -->
                <div id="customerProfile" class="customer-section" style="display: none;">
                    <h3>My Profile</h3>
                    <form id="profileForm" style="max-width: 600px;">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" id="profileName" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        </div>
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" id="profileEmail" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="tel" id="profilePhone" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        </div>
                        <div class="form-group">
                            <label>Address</label>
                            <input type="text" id="profileAddress" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="cta-button">Update Profile</button>
                            <button type="button" class="cta-button btn-cancel" onclick="showCustomerSection('dashboard')">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Documents Section -->
                <div id="customerDocuments" class="customer-section" style="display: none;">
                    <h3>My Documents</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Document Name</th>
                                <th>Shipment ID</th>
                                <th>Type</th>
                                <th>Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="documentsTable">
                            <!-- Documents will be populated dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Login/Register Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAuthModal()">&times;</span>
            <h2 style="text-align: center; margin-bottom: 30px; color: var(--earth-brown);" id="authModalTitle">Login</h2>
            
            <div class="tabs">
                <div class="tab active" id="loginTab" onclick="switchAuthTab('login')">Login</div>
                <div class="tab" id="registerTab" onclick="switchAuthTab('register')">Register</div>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="tab-content active">
                <form id="customerLoginForm">
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="loginEmail" placeholder="Enter your email" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <span class="error-message" id="loginEmailError">Please enter a valid email address</span>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" placeholder="Enter your password" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <span class="error-message" id="loginPasswordError">Please enter your password</span>
                    </div>
                    <button type="submit" class="cta-button" id="loginSubmitBtn">Login</button>
                    <p style="text-align: center; margin-top: 20px;">
                        <a href="#" onclick="switchAuthTab('register')" style="color: var(--forest-green);">Don't have an account? Register</a>
                    </p>
                </form>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="tab-content">
                <form id="customerRegisterForm">
                    <div class="form-group">
                        <label>Full Name *</label>
                        <input type="text" id="registerName" placeholder="Enter your full name" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <span class="error-message" id="registerNameError">Please enter your full name (at least 3 characters)</span>
                    </div>
                    <div class="form-group">
                        <label>Email Address *</label>
                        <input type="email" id="registerEmail" placeholder="Enter your email" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <span class="error-message" id="registerEmailError">Please enter a valid email address</span>
                    </div>
                    <div class="form-group">
                        <label>Phone Number *</label>
                        <input type="tel" id="registerPhone" placeholder="Enter your phone number (e.g., 0712345678)" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <span class="error-message" id="registerPhoneError">Please enter a valid Kenyan phone number</span>
                    </div>
                    <div class="form-group">
                        <label>Address *</label>
                        <input type="text" id="registerAddress" placeholder="Enter your address" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <span class="error-message" id="registerAddressError">Please enter your address</span>
                    </div>
                    <div class="form-group">
                        <label>Password *</label>
                        <input type="password" id="registerPassword" placeholder="Create a password (min 6 characters)" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <span class="error-message" id="registerPasswordError">Password must be at least 6 characters</span>
                        <div class="password-strength">
                            <div class="password-strength-bar" id="passwordStrengthBar"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Confirm Password *</label>
                        <input type="password" id="registerConfirmPassword" placeholder="Confirm your password" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <span class="error-message" id="registerConfirmPasswordError">Passwords do not match</span>
                    </div>
                    <button type="submit" class="cta-button" id="registerSubmitBtn">Create Account</button>
                    <p style="text-align: center; margin-top: 20px;">
                        <a href="#" onclick="switchAuthTab('login')" style="color: var(--forest-green);">Already have an account? Login</a>
                    </p>
                </form>
            </div>

            <!-- Admin Login Form -->
            <div id="adminLoginForm" class="tab-content">
                <form id="adminLoginForm">
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" id="adminUsername" placeholder="Enter username" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <span class="error-message" id="adminUsernameError">Please enter username</span>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="adminPassword" placeholder="Enter password" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                        <span class="error-message" id="adminPasswordError">Please enter password</span>
                    </div>
                    <button type="submit" class="cta-button" id="adminLoginSubmitBtn">Login as Admin</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <p id="notificationText">Notification message</p>
    </div>

    <script>
        // Initialize localStorage if it doesn't exist
        function initializeLocalStorage() {
            if (!localStorage.getItem('josiahShipment')) {
                const initialData = {
                    users: [],
                    quotes: [],
                    shipments: [],
                    documents: [],
                    activities: []
                };
                localStorage.setItem('josiahShipment', JSON.stringify(initialData));
            }
        }

        // Initialize on load
        initializeLocalStorage();

        // Get current year
        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        // Mobile menu toggle
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            document.getElementById('mainNav').classList.toggle('active');
        });

        // Mobile sidebar toggle
        document.getElementById('mobileSidebarToggle').addEventListener('click', function() {
            document.getElementById('adminSidebar').classList.toggle('active');
        });

        document.getElementById('mobileCustomerSidebarToggle').addEventListener('click', function() {
            document.getElementById('customerSidebar').classList.toggle('active');
        });

        // Show different sections
        function showSection(sectionId) {
            document.getElementById('homeSection').classList.add('active');
            document.getElementById('adminDashboard').classList.remove('active');
            document.getElementById('customerPortal').classList.remove('active');
            
            // Scroll to section
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Show auth modal
        let currentAuthType = 'customer';
        
        function showLoginModal(type) {
            currentAuthType = type;
            document.getElementById('authModal').classList.add('active');
            
            // Clear any previous errors
            clearAllErrors();
            
            if (type === 'customer') {
                document.getElementById('authModalTitle').textContent = 'Customer Login';
                document.getElementById('loginTab').style.display = 'block';
                document.getElementById('registerTab').style.display = 'block';
                switchAuthTab('login');
            } else {
                document.getElementById('authModalTitle').textContent = 'Admin Login';
                document.getElementById('loginTab').style.display = 'none';
                document.getElementById('registerTab').style.display = 'none';
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('registerForm').style.display = 'none';
                document.getElementById('adminLoginForm').style.display = 'block';
                document.getElementById('adminLoginForm').classList.add('active');
            }
        }

        // Close auth modal
        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
            clearAllErrors();
        }

        // Switch auth tabs
        function switchAuthTab(tab) {
            const tabs = document.querySelectorAll('.tab');
            const forms = document.querySelectorAll('.tab-content');
            
            tabs.forEach(t => t.classList.remove('active'));
            forms.forEach(f => f.classList.remove('active'));
            
            if (tab === 'login') {
                document.getElementById('loginTab').classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                document.getElementById('registerTab').classList.add('active');
                document.getElementById('registerForm').classList.add('active');
            }
            
            clearAllErrors();
        }

        // Clear all error messages
        function clearAllErrors() {
            document.querySelectorAll('.error-message').forEach(msg => msg.classList.remove('show'));
            document.querySelectorAll('input, select, textarea').forEach(field => field.classList.remove('error'));
        }

        // Show error for a field
        function showError(fieldId, errorId) {
            document.getElementById(fieldId).classList.add('error');
            document.getElementById(errorId).classList.add('show');
        }

        // Hide error for a field
        function hideError(fieldId, errorId) {
            document.getElementById(fieldId).classList.remove('error');
            document.getElementById(errorId).classList.remove('show');
        }

        // Validate email
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // Validate Kenyan phone number
        function validateKenyanPhone(phone) {
            const re = /^(07|01)[0-9]{8}$/;
            return re.test(phone);
        }

        // Check password strength
        function checkPasswordStrength(password) {
            let strength = 0;
            const strengthBar = document.getElementById('passwordStrengthBar');
            
            if (password.length >= 6) strength++;
            if (password.length >= 10) strength++;
            if (/[A-Z]/.test(password) && /[a-z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;
            
            strengthBar.className = 'password-strength-bar';
            
            if (strength <= 2) {
                strengthBar.classList.add('weak');
            } else if (strength <= 3) {
                strengthBar.classList.add('medium');
            } else {
                strengthBar.classList.add('strong');
            }
        }

        // Password strength listener
        document.getElementById('registerPassword').addEventListener('input', function() {
            checkPasswordStrength(this.value);
        });

        // Handle customer login
        document.getElementById('customerLoginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            clearAllErrors();
            
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            let hasError = false;
            
            // Validate email
            if (!email) {
                showError('loginEmail', 'loginEmailError');
                hasError = true;
            } else if (!validateEmail(email)) {
                document.getElementById('loginEmailError').textContent = 'Please enter a valid email address';
                showError('loginEmail', 'loginEmailError');
                hasError = true;
            }
            
            // Validate password
            if (!password) {
                showError('loginPassword', 'loginPasswordError');
                hasError = true;
            }
            
            if (hasError) return;
            
            // Show loading state
            const submitBtn = document.getElementById('loginSubmitBtn');
            submitBtn.classList.add('loading');
            submitBtn.disabled = true;
            
            // Get users from localStorage
            const data = JSON.parse(localStorage.getItem('josiahShipment'));
            const user = data.users.find(u => u.email === email && u.password === password);
            
            setTimeout(() => {
                submitBtn.classList.remove('loading');
                submitBtn.disabled = false;
                
                if (user) {
                    // Set current user
                    localStorage.setItem('currentUser', JSON.stringify(user));
                    
                    // Close modal
                    closeAuthModal();
                    
                    // Show customer portal
                    document.getElementById('homeSection').classList.remove('active');
                    document.getElementById('adminDashboard').classList.remove('active');
                    document.getElementById('customerPortal').classList.add('active');
                    
                    // Update customer name
                    document.getElementById('customerName').textContent = user.name;
                    
                    // Load customer data
                    loadCustomerData();
                    
                    showNotification('Welcome back to Customer Portal!', 'success');
                } else {
                    showNotification('Invalid email or password. Please try again.', 'error');
                }
            }, 1000);
        });

        // Handle customer registration
        document.getElementById('customerRegisterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            clearAllErrors();
            
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const phone = document.getElementById('registerPhone').value.trim();
            const address = document.getElementById('registerAddress').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            let hasError = false;
            
            // Validate name
            if (!name || name.length < 3) {
                showError('registerName', 'registerNameError');
                hasError = true;
            }
            
            // Validate email
            if (!email) {
                showError('registerEmail', 'registerEmailError');
                hasError = true;
            } else if (!validateEmail(email)) {
                document.getElementById('registerEmailError').textContent = 'Please enter a valid email address';
                showError('registerEmail', 'registerEmailError');
                hasError = true;
            }
            
            // Validate phone
            if (!phone) {
                showError('registerPhone', 'registerPhoneError');
                hasError = true;
            } else if (!validateKenyanPhone(phone)) {
                document.getElementById('registerPhoneError').textContent = 'Please enter a valid Kenyan phone number (e.g., 0712345678)';
                showError('registerPhone', 'registerPhoneError');
                hasError = true;
            }
            
            // Validate address
            if (!address) {
                showError('registerAddress', 'registerAddressError');
                hasError = true;
            }
            
            // Validate password
            if (!password || password.length < 6) {
                showError('registerPassword', 'registerPasswordError');
                hasError = true;
            }
            
            // Validate password confirmation
            if (password !== confirmPassword) {
                showError('registerConfirmPassword', 'registerConfirmPasswordError');
                hasError = true;
            }
            
            if (hasError) return;
            
            // Show loading state
            const submitBtn = document.getElementById('registerSubmitBtn');
            submitBtn.classList.add('loading');
            submitBtn.disabled = true;
            
            // Get data from localStorage
            const data = JSON.parse(localStorage.getItem('josiahShipment'));
            
            setTimeout(() => {
                // Check if user already exists
                if (data.users.find(u => u.email === email)) {
                    submitBtn.classList.remove('loading');
                    submitBtn.disabled = false;
                    showNotification('An account with this email already exists.', 'error');
                    return;
                }
                
                // Create new user
                const newUser = {
                    id: 'C' + (data.users.length + 1).toString().padStart(3, '0'),
                    name,
                    email,
                    phone,
                    address,
                    password,
                    registrationDate: new Date().toISOString().split('T')[0],
                    totalShipments: 0
                };
                
                // Add user to data
                data.users.push(newUser);
                
                // Add activity
                data.activities.unshift({
                    date: new Date().toISOString().split('T')[0],
                    type: 'New customer registration',
                    customer: name,
                    status: 'completed'
                });
                
                // Save to localStorage
                localStorage.setItem('josiahShipment', JSON.stringify(data));
                
                // Set current user
                localStorage.setItem('currentUser', JSON.stringify(newUser));
                
                submitBtn.classList.remove('loading');
                submitBtn.disabled = false;
                
                // Close modal
                closeAuthModal();
                
                // Show customer portal
                document.getElementById('homeSection').classList.remove('active');
                document.getElementById('adminDashboard').classList.remove('active');
                document.getElementById('customerPortal').classList.add('active');
                
                // Update customer name
                document.getElementById('customerName').textContent = name;
                
                // Load customer data
                loadCustomerData();
                
                showNotification('Registration successful! Welcome to Josiah Shipment.', 'success');
            }, 1000);
        });

        // Handle admin login
        document.getElementById('adminLoginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            clearAllErrors();
            
            const username = document.getElementById('adminUsername').value.trim();
            const password = document.getElementById('adminPassword').value;
            
            let hasError = false;
            
            // Validate username
            if (!username) {
                showError('adminUsername', 'adminUsernameError');
                hasError = true;
            }
            
            // Validate password
            if (!password) {
                showError('adminPassword', 'adminPasswordError');
                hasError = true;
            }
            
            if (hasError) return;
            
            // Show loading state
            const submitBtn = document.getElementById('adminLoginSubmitBtn');
            submitBtn.classList.add('loading');
            submitBtn.disabled = true;
            
            setTimeout(() => {
                submitBtn.classList.remove('loading');
                submitBtn.disabled = false;
                
                // Simple admin credentials (in a real app, this would be more secure)
                if (username === 'admin' && password === 'admin123') {
                    // Set current admin
                    const adminUser = {
                        id: 'ADMIN',
                        name: 'Administrator',
                        email: 'admin@josiahshipment.com',
                        role: 'admin'
                    };
                    localStorage.setItem('currentUser', JSON.stringify(adminUser));
                    
                    // Close modal
                    closeAuthModal();
                    
                    // Show admin dashboard
                    document.getElementById('homeSection').classList.remove('active');
                    document.getElementById('customerPortal').classList.remove('active');
                    document.getElementById('adminDashboard').classList.add('active');
                    
                    // Update admin name
                    document.getElementById('adminName').textContent = 'Administrator';
                    
                    // Load admin data
                    loadAdminData();
                    
                    showNotification('Welcome to Admin Dashboard!', 'success');
                } else {
                    showNotification('Invalid username or password. Please try again.', 'error');
                }
            }, 1000);
        });

        // Logout function
        function logout() {
            localStorage.removeItem('currentUser');
            document.getElementById('homeSection').classList.add('active');
            document.getElementById('adminDashboard').classList.remove('active');
            document.getElementById('customerPortal').classList.remove('active');
            showNotification('You have been logged out successfully.', 'success');
        }

        // Show admin sections
        function showAdminSection(section) {
            const sections = document.querySelectorAll('.admin-section');
            const links = document.querySelectorAll('.admin-sidebar-menu a');
            
            sections.forEach(s => s.style.display = 'none');
            links.forEach(l => l.classList.remove('active'));
            
            document.getElementById('admin' + section.charAt(0).toUpperCase() + section.slice(1)).style.display = 'block';
            event.target.classList.add('active');
            
            // Update section title
            const titles = {
                'overview': 'Dashboard',
                'quotes': 'Quote Requests',
                'shipments': 'Active Shipments',
                'customers': 'Customer Management',
                'reports': 'Reports & Analytics'
            };
            document.getElementById('adminSectionTitle').textContent = titles[section];
        }

        // Show customer sections
        function showCustomerSection(section) {
            const sections = document.querySelectorAll('.customer-section');
            const links = document.querySelectorAll('.customer-sidebar-menu a');
            
            sections.forEach(s => s.style.display = 'none');
            links.forEach(l => l.classList.remove('active'));
            
            document.getElementById('customer' + section.charAt(0).toUpperCase() + section.slice(1)).style.display = 'block';
            event.target.classList.add('active');
            
            // Update section title
            const titles = {
                'dashboard': 'Dashboard',
                'shipments': 'My Shipments',
                'quotes': 'My Quote Requests',
                'profile': 'My Profile',
                'documents': 'My Documents'
            };
            document.getElementById('customerSectionTitle').textContent = titles[section];
            
            // Load profile data if profile section
            if (section === 'profile') {
                loadProfileData();
            }
        }

        // Load admin data
        function loadAdminData() {
            const data = JSON.parse(localStorage.getItem('josiahShipment'));
            
            // Update stats
            const statsContainer = document.getElementById('adminStats');
            statsContainer.innerHTML = `
                <div class="stat-card">
                    <h3>${data.quotes.filter(q => q.status === 'pending').length}</h3>
                    <p>Pending Quotes</p>
                </div>
                <div class="stat-card">
                    <h3>${data.shipments.filter(s => s.status === 'shipped').length}</h3>
                    <p>Active Shipments</p>
                </div>
                <div class="stat-card">
                    <h3>${data.users.length}</h3>
                    <p>Total Customers</p>
                </div>
                <div class="stat-card">
                    <h3>KES ${data.shipments.length * 45000}</h3>
                    <p>Revenue This Month</p>
                </div>
            `;
            
            // Update recent activities
            const activitiesContainer = document.getElementById('recentActivities');
            if (data.activities.length > 0) {
                activitiesContainer.innerHTML = data.activities.slice(0, 5).map(activity => `
                    <tr>
                        <td>${activity.date}</td>
                        <td>${activity.type}</td>
                        <td>${activity.customer}</td>
                        <td><span class="status-badge status-${activity.status}">${activity.status}</span></td>
                    </tr>
                `).join('');
            } else {
                activitiesContainer.innerHTML = `
                    <tr>
                        <td colspan="4" class="empty-state">No recent activities</td>
                    </tr>
                `;
            }
            
            // Update quotes table
            const quotesContainer = document.getElementById('quotesTable');
            if (data.quotes.length > 0) {
                quotesContainer.innerHTML = data.quotes.map(quote => `
                    <tr>
                        <td>${quote.id}</td>
                        <td>${quote.customerName}</td>
                        <td>${quote.origin}</td>
                        <td>${quote.destination}</td>
                        <td>${quote.productType}</td>
                        <td>${quote.date}</td>
                        <td><span class="status-badge status-${quote.status}">${quote.status}</span></td>
                        <td>
                            <button class="cta-button" style="padding: 5px 15px; font-size: 0.9rem;" onclick="processQuote('${quote.id}')">
                                ${quote.status === 'pending' ? 'Process' : 'View'}
                            </button>
                        </td>
                    </tr>
                `).join('');
            } else {
                quotesContainer.innerHTML = `
                    <tr>
                        <td colspan="8" class="empty-state">No quote requests</td>
                    </tr>
                `;
            }
            
            // Update shipments table
            const shipmentsContainer = document.getElementById('shipmentsTable');
            if (data.shipments.length > 0) {
                shipmentsContainer.innerHTML = data.shipments.map(shipment => `
                    <tr>
                        <td>${shipment.id}</td>
                        <td>${shipment.customerName}</td>
                        <td>${shipment.origin}  ${shipment.destination}</td>
                        <td>${shipment.departureDate}</td>
                        <td>${shipment.arrivalDate}</td>
                        <td><span class="status-badge status-${shipment.status}">${shipment.status}</span></td>
                        <td>
                            <button class="cta-button" style="padding: 5px 15px; font-size: 0.9rem;" onclick="updateShipment('${shipment.id}')">
                                Update
                            </button>
                        </td>
                    </tr>
                `).join('');
            } else {
                shipmentsContainer.innerHTML = `
                    <tr>
                        <td colspan="7" class="empty-state">No active shipments</td>
                    </tr>
                `;
            }
            
            // Update customers table
            const customersContainer = document.getElementById('customersTable');
            if (data.users.length > 0) {
                customersContainer.innerHTML = data.users.map(user => `
                    <tr>
                        <td>${user.id}</td>
                        <td>${user.name}</td>
                        <td>${user.email}</td>
                        <td>${user.phone}</td>
                        <td>${user.totalShipments || 0}</td>
                        <td>${user.registrationDate}</td>
                        <td>
                            <button class="cta-button" style="padding: 5px 15px; font-size: 0.9rem;" onclick="viewCustomer('${user.id}')">
                                View
                            </button>
                        </td>
                    </tr>
                `).join('');
            } else {
                customersContainer.innerHTML = `
                    <tr>
                        <td colspan="7" class="empty-state">No customers</td>
                    </tr>
                `;
            }
            
            // Update reports stats
            const reportsStatsContainer = document.getElementById('reportsStats');
            reportsStatsContainer.innerHTML = `
                <div class="stat-card">
                    <h3>KES ${data.shipments.length * 45000 * 12}</h3>
                    <p>Total Revenue (YTD)</p>
                </div>
                <div class="stat-card">
                    <h3>${data.shipments.length}</h3>
                    <p>Total Shipments (YTD)</p>
                </div>
                <div class="stat-card">
                    <h3>${data.users.length}</h3>
                    <p>Active Customers</p>
                </div>
                <div class="stat-card">
                    <h3>96%</h3>
                    <p>On-Time Delivery Rate</p>
                </div>
            `;
        }

        // Load customer data
        function loadCustomerData() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const data = JSON.parse(localStorage.getItem('josiahShipment'));
            
            // Get customer's quotes
            const customerQuotes = data.quotes.filter(q => q.customerId === currentUser.id);
            
            // Get customer's shipments
            const customerShipments = data.shipments.filter(s => s.customerId === currentUser.id);
            
            // Get customer's documents
            const customerDocuments = data.documents.filter(d => d.customerId === currentUser.id);
            
            // Update stats
            const statsContainer = document.getElementById('customerStats');
            statsContainer.innerHTML = `
                <div class="stat-card">
                    <h3>${customerShipments.filter(s => s.status === 'shipped').length}</h3>
                    <p>Active Shipments</p>
                </div>
                <div class="stat-card">
                    <h3>${customerQuotes.filter(q => q.status === 'pending').length}</h3>
                    <p>Pending Quotes</p>
                </div>
                <div class="stat-card">
                    <h3>${customerShipments.length}</h3>
                    <p>Total Shipments</p>
                </div>
                <div class="stat-card">
                    <h3>KES ${customerShipments.length * 45000}</h3>
                    <p>Total Spent</p>
                </div>
            `;
            
            // Update recent shipments
            const recentShipmentsContainer = document.getElementById('customerRecentShipments');
            if (customerShipments.length > 0) {
                recentShipmentsContainer.innerHTML = customerShipments.slice(0, 3).map(shipment => `
                    <div class="shipment-card">
                        <h4>${shipment.productType} from ${shipment.origin}</h4>
                        <p>Tracking ID: ${shipment.id}</p>
                        <div class="shipment-details">
                            <div>
                                <span>Origin</span>
                                <strong>${shipment.origin}</strong>
                            </div>
                            <div>
                                <span>Destination</span>
                                <strong>${shipment.destination}</strong>
                            </div>
                            <div>
                                <span>Status</span>
                                <strong><span class="status-badge status-${shipment.status}">${shipment.status}</span></strong>
                            </div>
                            <div>
                                <span>Expected Arrival</span>
                                <strong>${shipment.arrivalDate}</strong>
                            </div>
                        </div>
                    </div>
                `).join('');
            } else {
                recentShipmentsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-shipping-fast"></i>
                        <p>You don't have any shipments yet.</p>
                        <button class="cta-button" onclick="showSection('quote')">Request a Quote</button>
                    </div>
                `;
            }
            
            // Update all shipments
            const allShipmentsContainer = document.getElementById('customerAllShipments');
            if (customerShipments.length > 0) {
                allShipmentsContainer.innerHTML = customerShipments.map(shipment => `
                    <div class="shipment-card">
                        <h4>${shipment.productType} from ${shipment.origin}</h4>
                        <p>Tracking ID: ${shipment.id}</p>
                        <div class="shipment-details">
                            <div>
                                <span>Origin</span>
                                <strong>${shipment.origin}</strong>
                            </div>
                            <div>
                                <span>Destination</span>
                                <strong>${shipment.destination}</strong>
                            </div>
                            <div>
                                <span>Status</span>
                                <strong><span class="status-badge status-${shipment.status}">${shipment.status}</span></strong>
                            </div>
                            <div>
                                <span>${shipment.status === 'delivered' ? 'Delivered' : 'Expected Arrival'}</span>
                                <strong>${shipment.arrivalDate}</strong>
                            </div>
                        </div>
                    </div>
                `).join('');
            } else {
                allShipmentsContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-shipping-fast"></i>
                        <p>You don't have any shipments yet.</p>
                        <button class="cta-button" onclick="showSection('quote')">Request a Quote</button>
                    </div>
                `;
            }
            
            // Update all quotes
            const allQuotesContainer = document.getElementById('customerAllQuotes');
            if (customerQuotes.length > 0) {
                allQuotesContainer.innerHTML = customerQuotes.map(quote => `
                    <div class="shipment-card">
                        <h4>${quote.productType} from ${quote.origin}</h4>
                        <p>Quote ID: ${quote.id}</p>
                        <div class="shipment-details">
                            <div>
                                <span>Origin</span>
                                <strong>${quote.origin}</strong>
                            </div>
                            <div>
                                <span>Destination</span>
                                <strong>${quote.destination}</strong>
                            </div>
                            <div>
                                <span>Status</span>
                                <strong><span class="status-badge status-${quote.status}">${quote.status}</span></strong>
                            </div>
                            <div>
                                <span>Requested</span>
                                <strong>${quote.date}</strong>
                            </div>
                        </div>
                    </div>
                `).join('');
            } else {
                allQuotesContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-file-invoice"></i>
                        <p>You don't have any quote requests yet.</p>
                        <button class="cta-button" onclick="showSection('quote')">Request a Quote</button>
                    </div>
                `;
            }
            
            // Update documents table
            const documentsContainer = document.getElementById('documentsTable');
            if (customerDocuments.length > 0) {
                documentsContainer.innerHTML = customerDocuments.map(doc => `
                    <tr>
                        <td>${doc.name}</td>
                        <td>${doc.shipmentId}</td>
                        <td>${doc.type}</td>
                        <td>${doc.date}</td>
                        <td>
                            <button class="cta-button" style="padding: 5px 15px; font-size: 0.9rem;" onclick="downloadDocument('${doc.id}')">
                                Download
                            </button>
                        </td>
                    </tr>
                `).join('');
            } else {
                documentsContainer.innerHTML = `
                    <tr>
                        <td colspan="5" class="empty-state">No documents available</td>
                    </tr>
                `;
            }
        }

        // Load profile data
        function loadProfileData() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            document.getElementById('profileName').value = currentUser.name;
            document.getElementById('profileEmail').value = currentUser.email;
            document.getElementById('profilePhone').value = currentUser.phone;
            document.getElementById('profileAddress').value = currentUser.address;
        }

        // Handle profile update
        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const data = JSON.parse(localStorage.getItem('josiahShipment'));
            
            // Find user in data
            const userIndex = data.users.findIndex(u => u.id === currentUser.id);
            
            if (userIndex !== -1) {
                // Update user data
                data.users[userIndex].name = document.getElementById('profileName').value;
                data.users[userIndex].email = document.getElementById('profileEmail').value;
                data.users[userIndex].phone = document.getElementById('profilePhone').value;
                data.users[userIndex].address = document.getElementById('profileAddress').value;
                
                // Save to localStorage
                localStorage.setItem('josiahShipment', JSON.stringify(data));
                
                // Update current user
                currentUser.name = document.getElementById('profileName').value;
                currentUser.email = document.getElementById('profileEmail').value;
                currentUser.phone = document.getElementById('profilePhone').value;
                currentUser.address = document.getElementById('profileAddress').value;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                // Update display name
                document.getElementById('customerName').textContent = currentUser.name;
                
                showNotification('Profile updated successfully!', 'success');
            }
        });

        // Handle quote form submission
        document.getElementById('quoteForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            clearAllErrors();
            
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const origin = document.getElementById('origin').value;
            const destination = document.getElementById('destination').value.trim();
            const productType = document.getElementById('product-type').value;
            const description = document.getElementById('description').value.trim();
            
            let hasError = false;
            
            // Validate fields
            if (!name) {
                showError('name', 'nameError');
                hasError = true;
            }
            
            if (!email || !validateEmail(email)) {
                showError('email', 'emailError');
                hasError = true;
            }
            
            if (!phone) {
                showError('phone', 'phoneError');
                hasError = true;
            }
            
            if (!origin) {
                showError('origin', 'originError');
                hasError = true;
            }
            
            if (!destination) {
                showError('destination', 'destinationError');
                hasError = true;
            }
            
            if (!productType) {
                showError('product-type', 'productTypeError');
                hasError = true;
            }
            
            if (!description) {
                showError('description', 'descriptionError');
                hasError = true;
            }
            
            if (hasError) return;
            
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            const data = JSON.parse(localStorage.getItem('josiahShipment'));
            
            // If user is not logged in, show login modal
            if (!currentUser) {
                showLoginModal('customer');
                return;
            }
            
            // Show loading state
            const submitBtn = document.getElementById('quoteSubmitBtn');
            submitBtn.classList.add('loading');
            submitBtn.disabled = true;
            
            setTimeout(() => {
                // Create new quote
                const newQuote = {
                    id: 'Q' + (data.quotes.length + 1).toString().padStart(3, '0'),
                    customerId: currentUser.id,
                    customerName: currentUser.name,
                    origin,
                    destination,
                    productType,
                    description,
                    date: new Date().toISOString().split('T')[0],
                    status: 'pending'
                };
                
                // Add quote to data
                data.quotes.push(newQuote);
                
                // Add activity
                data.activities.unshift({
                    date: new Date().toISOString().split('T')[0],
                    type: 'New quote request',
                    customer: currentUser.name,
                    status: 'pending'
                });
                
                // Save to localStorage
                localStorage.setItem('josiahShipment', JSON.stringify(data));
                
                submitBtn.classList.remove('loading');
                submitBtn.disabled = false;
                
                // Reset form
                this.reset();
                
                showNotification('Quote request submitted successfully! We will contact you soon.', 'success');
            }, 1000);
        });

        // Handle newsletter form submission
        document.getElementById('newsletterForm').addEventListener('submit', function(e) {
            e.preventDefault();
            showNotification('Thank you for subscribing to our newsletter!', 'success');
            this.reset();
        });

        // Process quote (admin function)
        function processQuote(quoteId) {
            const data = JSON.parse(localStorage.getItem('josiahShipment'));
            const quoteIndex = data.quotes.findIndex(q => q.id === quoteId);
            
            if (quoteIndex !== -1) {
                const quote = data.quotes[quoteIndex];
                
                if (quote.status === 'pending') {
                    // Create shipment from quote
                    const newShipment = {
                        id: 'JST' + new Date().getFullYear() + (data.shipments.length + 1).toString().padStart(3, '0'),
                        customerId: quote.customerId,
                        customerName: quote.customerName,
                        origin: quote.origin,
                        destination: quote.destination,
                        productType: quote.productType,
                        description: quote.description,
                        departureDate: new Date().toISOString().split('T')[0],
                        arrivalDate: calculateArrivalDate(quote.origin, quote.destination),
                        status: 'confirmed'
                    };
                    
                    // Add shipment
                    data.shipments.push(newShipment);
                    
                    // Update quote status
                    data.quotes[quoteIndex].status = 'confirmed';
                    
                    // Add activity
                    data.activities.unshift({
                        date: new Date().toISOString().split('T')[0],
                        type: 'Quote confirmed',
                        customer: quote.customerName,
                        status: 'confirmed'
                    });
                    
                    // Update user's shipment count
                    const userIndex = data.users.findIndex(u => u.id === quote.customerId);
                    if (userIndex !== -1) {
                        data.users[userIndex].totalShipments = (data.users[userIndex].totalShipments || 0) + 1;
                    }
                    
                    // Save to localStorage
                    localStorage.setItem('josiahShipment', JSON.stringify(data));
                    
                    // Reload admin data
                    loadAdminData();
                    
                    showNotification(`Quote ${quoteId} has been confirmed and shipment created.`, 'success');
                } else {
                    showNotification(`Quote ${quoteId} is already ${quote.status}.`, 'error');
                }
            }
        }

        // Update shipment status (admin function)
        function updateShipment(shipmentId) {
            const data = JSON.parse(localStorage.getItem('josiahShipment'));
            const shipmentIndex = data.shipments.findIndex(s => s.id === shipmentId);
            
            if (shipmentIndex !== -1) {
                const shipment = data.shipments[shipmentIndex];
                
                // Cycle through statuses
                const statuses = ['confirmed', 'shipped', 'delivered'];
                const currentIndex = statuses.indexOf(shipment.status);
                const newStatus = statuses[(currentIndex + 1) % statuses.length];
                
                // Update shipment status
                data.shipments[shipmentIndex].status = newStatus;
                
                // Add activity
                data.activities.unshift({
                    date: new Date().toISOString().split('T')[0],
                    type: `Shipment ${newStatus}`,
                    customer: shipment.customerName,
                    status: newStatus
                });
                
                // If delivered, add a document
                if (newStatus === 'delivered') {
                    const newDocument = {
                        id: 'DOC' + (data.documents.length + 1).toString().padStart(3, '0'),
                        customerId: shipment.customerId,
                        shipmentId: shipment.id,
                        name: `Delivery_Reciept_${shipment.id}.pdf`,
                        type: 'Delivery Receipt',
                        date: new Date().toISOString().split('T')[0]
                    };
                    
                    data.documents.push(newDocument);
                }
                
                // Save to localStorage
                localStorage.setItem('josiahShipment', JSON.stringify(data));
                
                // Reload admin data
                loadAdminData();
                
                showNotification(`Shipment ${shipmentId} status updated to ${newStatus}.`, 'success');
            }
        }

        // View customer details (admin function)
        function viewCustomer(customerId) {
            const data = JSON.parse(localStorage.getItem('josiahShipment'));
            const customer = data.users.find(u => u.id === customerId);
            
            if (customer) {
                const customerQuotes = data.quotes.filter(q => q.customerId === customerId);
                const customerShipments = data.shipments.filter(s => s.customerId === customerId);
                
                showNotification(`Customer: ${customer.name}, Email: ${customer.email}, Phone: ${customer.phone}, Quotes: ${customerQuotes.length}, Shipments: ${customerShipments.length}`, 'success');
            }
        }

        // Download document (customer function)
        function downloadDocument(documentId) {
            showNotification(`Document ${documentId} downloaded successfully.`, 'success');
        }

        // Calculate arrival date based on origin and destination
        function calculateArrivalDate(origin, destination) {
            const today = new Date();
            let daysToAdd = 14; // Default
            
            // Adjust based on origin
            if (origin === 'china') daysToAdd = 21;
            else if (origin === 'usa') daysToAdd = 14;
            else if (origin === 'uk') daysToAdd = 10;
            else if (origin === 'europe') daysToAdd = 12;
            
            const arrivalDate = new Date(today);
            arrivalDate.setDate(today.getDate() + daysToAdd);
            
            return arrivalDate.toISOString().split('T')[0];
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = 'notification show ' + type;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('authModal');
            if (event.target == modal) {
                closeAuthModal();
            }
        }

        // Check if user is already logged in
        window.onload = function() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            
            if (currentUser) {
                if (currentUser.role === 'admin') {
                    // Show admin dashboard
                    document.getElementById('homeSection').classList.remove('active');
                    document.getElementById('customerPortal').classList.remove('active');
                    document.getElementById('adminDashboard').classList.add('active');
                    
                    // Update admin name
                    document.getElementById('adminName').textContent = currentUser.name;
                    
                    // Load admin data
                    loadAdminData();
                } else {
                    // Show customer portal
                    document.getElementById('homeSection').classList.remove('active');
                    document.getElementById('adminDashboard').classList.remove('active');
                    document.getElementById('customerPortal').classList.add('active');
                    
                    // Update customer name
                    document.getElementById('customerName').textContent = currentUser.name;
                    
                    // Load customer data
                    loadCustomerData();
                }
            }
        }

        // Check for mobile view
        function checkMobileView() {
            if (window.innerWidth <= 768) {
                document.getElementById('mobileSidebarToggle').style.display = 'block';
                document.getElementById('mobileCustomerSidebarToggle').style.display = 'block';
            } else {
                document.getElementById('mobileSidebarToggle').style.display = 'none';
                document.getElementById('mobileCustomerSidebarToggle').style.display = 'none';
            }
        }

        // Initial check and add resize listener
        checkMobileView();
        window.addEventListener('resize', checkMobileView);

        // Add input event listeners for real-time validation
        document.getElementById('registerName').addEventListener('input', function() {
            if (this.value.trim().length >= 3) {
                hideError('registerName', 'registerNameError');
            }
        });

        document.getElementById('registerEmail').addEventListener('input', function() {
            if (validateEmail(this.value.trim())) {
                hideError('registerEmail', 'registerEmailError');
            }
        });

        document.getElementById('registerPhone').addEventListener('input', function() {
            if (validateKenyanPhone(this.value.trim())) {
                hideError('registerPhone', 'registerPhoneError');
            }
        });

        document.getElementById('registerAddress').addEventListener('input', function() {
            if (this.value.trim()) {
                hideError('registerAddress', 'registerAddressError');
            }
        });

        document.getElementById('registerPassword').addEventListener('input', function() {
            if (this.value.length >= 6) {
                hideError('registerPassword', 'registerPasswordError');
            }
        });

        document.getElementById('registerConfirmPassword').addEventListener('input', function() {
            const password = document.getElementById('registerPassword').value;
            if (this.value === password && password) {
                hideError('registerConfirmPassword', 'registerConfirmPasswordError');
            }
        });
    </script>
</body>
</html>
